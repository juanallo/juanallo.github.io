---
import avatar from '@/images/avatar.png';
import { AppConfig } from '@/utils/AppConfig';

const {
  data: { title, description, image, pubDate, tags },
  url,
} = Astro.props;

const finalImage = image?.src ? image.src : avatar.src;

const schema = {
  '@context': 'https://schema.org',
  '@type': 'BlogPosting',
  headline: title,
  image: AppConfig.base_path + finalImage,
  description,
  inLanguage: AppConfig.locale,
  author: {
    '@type': 'Person',
    name: AppConfig.author,
  },
  mainEntityOfPage: {
    '@type': 'WebPage',
    '@id': AppConfig.base_path + url,
  },
  datePublished: pubDate,
  keywords: Array.isArray(tags) ? tags.join(', ') : tags,
};
---

<script type='application/ld+json' set:html={JSON.stringify(schema)}>

</script>
